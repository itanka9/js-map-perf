(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function e(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=e(s);fetch(s.href,o)}})();class M{constructor(){this.ids=new Map,this.index=0}insert(t){this.ids.set(t,this.index),this.index++}find(t){return this.ids.get(t)}delete(t){this.ids.set(t,void 0)}deleteHard(t){delete this.ids.delete(t)}serialize(){return JSON.stringify(Array.from(this.ids.entries()))}deserialize(t){this.ids=new Map(JSON.parse(t))}}class A{constructor(){this.ids={},this.index=0}insert(t){this.ids[t]=this.index,this.index++}find(t){return this.ids[t]}delete(t){this.ids[t]}deleteHard(t){delete this.ids[t]}serialize(){return JSON.stringify(this.ids)}deserialize(t){this.ids=JSON.parse(t)}}class O{constructor(){this.map={},this.index=0}insert(t){let e=this.map[t.lo];e===void 0&&(e=this.map[t.lo]={}),this.index++,e[t.hi]=this.index}delete(t){const e=this.map[t.lo];e!==void 0&&(e[t.hi]=void 0)}deleteHard(t){const e=this.map[t.lo];e!==void 0&&(delete e[t.hi],Object.keys(this.map[t.lo]).length===0&&delete this.map[t.lo])}find(t){if(this.map[t.lo]!==void 0)return this.map[t.lo][t.hi]}serialize(){return JSON.stringify(this.map)}deserialize(t){this.map=JSON.parse(t)}}const w=[];let u=0;const c={};let z=!1,$=!1;const m={},g=[10**4,10**5,10**6],f={obj:A,map:M,idmap:O};R("ids speed test",()=>{let i={},t={};y(()=>{for(const e of g)i[e]=x(4,20,e),t[e]=D(e)}),S(()=>{w.push(N()),document.body.innerHTML=w.join("")});for(const e of g)for(const n in f)p(`insert ${e} ids in ${n}`,()=>{const s=new f[n],o=n==="idmap"?t[e]:i[e];for(let r=0;r<10;r++){const l=Date.now();for(const a of o)s.insert(a);const d=Date.now();r>1&&h(n,e,"insert",d-l)}}),p(`delete ${e} ids in ${n}`,()=>{const s=new f[n],o=n==="idmap"?t[e]:i[e];for(let r=0;r<10;r++){for(const a of o)s.insert(a);const l=Date.now();for(const a of o)s.deleteHard(a);const d=Date.now();r>1&&h(n,e,"delete",d-l)}}),p(`find ${e} ids in ${n}`,()=>{const s=new f[n],o=n==="idmap"?t[e]:i[e];for(const r of o)s.insert(r);for(let r=0;r<10;r++){const l=Date.now();let d=0;for(const b of o)d=s.find(b);console.log(d);const a=Date.now();r>1&&h(n,e,"find",a-l)}}),p(`serialize ${e} ids in ${n}`,()=>{const s=new f[n],o=n==="idmap"?t[e]:i[e];for(const d of o)s.insert(d);const r=Date.now();s.serialize();const l=Date.now();h(n,e,"serialize",l-r)}),p(`deserialize ${e} ids in ${n}`,()=>{const s=new f[n],o=n==="idmap"?t[e]:i[e];for(const a of o)s.insert(a);const r=s.serialize(),l=Date.now();s.deserialize(r);const d=Date.now();h(n,e,"deserialize",d-l)})});function x(i,t,e){const n=[];for(let s=0;s<e;s++)n.push(I(i,t));return n}function D(i){const t=[];for(let e=0;e<i;e++)t.push({lo:Math.floor(Math.random()*10**9),hi:Math.floor(Math.random()*10**9)});return t}function I(i,t){let e="";const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=Math.floor(Math.random()*(t-i+1))+i;for(let o=0;o<s;o++)e+=n.charAt(Math.floor(Math.random()*n.length));return e}function h(i,t,e,n){m[e]||(m[e]={});const s=m[e];s[i]||(s[i]={});const o=s[i];o[t]||(o[t]=[]),o[t].push(n)}function N(){const i=[];for(const t in m){i.push(`<h2>${t}</h2>`),i.push("<table>");const e=m[t],n=["<th>struct</th>"];for(const s of g)n.push(`<th>${s}</th>`);i.push(`<tr>${n.join("")}</tr>`);for(const s in f){const o=[`<td>${s}</td>`];for(const r of g){const l=e[s][r].reduce((d,a)=>d+a,0)/e[s][r].length;o.push(`<td>${l.toPrecision(5)}</td>`)}i.push(`<tr>${o.join("")}</tr>`)}i.push("</table>")}return i.join("")}function R(i,t){u+=1,w.push(`<h${u}>${i}</h${u}>`),t(),u-=1,u===0&&!$&&((c.afterAll??[]).forEach(e=>e()),$=!0)}function y(i){c.beforeAll||(c.beforeAll=[]),c.beforeAll.push(i)}function S(i){c.afterAll||(c.afterAll=[]),c.afterAll.push(i)}function p(i,t){z||((c.beforeAll??[]).forEach(e=>e()),z=!0),t()}
